package com.katana.main;

import java.util.ArrayList;

import android.app.Activity;
import android.app.Dialog;
import android.content.DialogInterface;
import android.content.DialogInterface.OnCancelListener;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.ImageButton;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity {
    
	private int classChoice = 0;
	private int selectClass = 0;
	private Dialog classDialog;
	
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        
        ArrayList<String> items = new ArrayList<String>();
        items.add("abc");
        items.add("def");
        items.add("ghi");
        items.add("jkl");
        items.add("mno");
        items.add("pqr");
        
        ListView listView = (ListView)findViewById(R.id.roomsList);
        listView.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, items));
    }
    
    public void joinRoom(View view){
    	// set up dialog
    	classDialog = new Dialog(this, R.style.SelectClassTheme);
    	classDialog.setContentView(R.layout.select_class);
    	classDialog.setTitle("Select Class");
    	classDialog.setCancelable(true);
    	classDialog.setOnCancelListener( new OnCancelListener() {

			public void onCancel(DialogInterface arg0) {
				String message = "muahahaha";
				Toast toast = Toast.makeText(MainActivity.this, message, Toast.LENGTH_SHORT);
				toast.show();
				classDialog.dismiss();
			}
    		
    	})
    	  	
    	ImageButton class1 = (ImageButton)classDialog.findViewById(R.id.class1_b);
    	ImageButton class2 = (ImageButton)classDialog.findViewById(R.id.class2_b);
    	if(classChoice == 1) {
    		/** Set class1 image to selected! **/
    		class1.setImageResource(R.drawable.class1);
    		class2.setImageResource(R.drawable.class2);
    	} else if (classChoice == 2){
    		/** Set class2 image to selected! **/
    		class1.setImageResource(R.drawable.class1);
    		class2.setImageResource(R.drawable.class2);
    	} else {
    		class1.setImageResource(R.drawable.class1);
    		class2.setImageResource(R.drawable.class2);
    	}
    	
    	class1.setOnClickListener( new OnClickListener(){
			public void onClick(View v) {
				if(selectClass != 1) {
					selectClass = 1;
					TextView desc = (TextView)classDialog.findViewById(R.id.classDesc);
					desc.setText("This is the mage. He can heal :D");
					
					/** Set class images to indicate change!**/
					
					
				} else if(selectClass == 1){
					classChoice = 1;
					selectClass = 0;
					// Join game!
					String message = "Joining the game as class 1!";
					Toast toast = Toast.makeText(MainActivity.this, message, Toast.LENGTH_SHORT);
					toast.show();
					classDialog.dismiss();
				}
			}
    	});
    	
    	class2.setOnClickListener( new OnClickListener(){
			public void onClick(View v) {
				if(selectClass != 2) {
					selectClass = 2;
					TextView desc = (TextView)classDialog.findViewById(R.id.classDesc);
					desc.setText("This is the warrior. He is strong :D");
					
					/** Set class images to indicate change!**/
					
				} else if(selectClass == 2){
					classChoice = 2;
					selectClass = 0;
					
					// Join game!
					String message = "Joining the game as class 2!";
					Toast toast = Toast.makeText(MainActivity.this, message, Toast.LENGTH_SHORT);
					toast.show();
					classDialog.dismiss();
				}
			}
    	});
    	
    	classDialog.show();
    	
    	// get user class selection
    	// join selected room
    }
    
    public void createRoom(View view){
    	String message = "Open create room dialog!";
		Toast toast = Toast.makeText(this, message, Toast.LENGTH_SHORT);
		toast.show();
    }

    public void refreshList(View view){
    	String message = "Refresh rooms list!";
		Toast toast = Toast.makeText(this, message, Toast.LENGTH_SHORT);
		toast.show();
    }

    public void showLeaderboard(View view){
    	String message = "Show leaderboard!";
		Toast toast = Toast.makeText(this, message, Toast.LENGTH_SHORT);
		toast.show();
    }
    
    public void selectClass(View view){
    	String message = "You picked class 1!";
		Toast toast = Toast.makeText(this, message, Toast.LENGTH_SHORT);
		toast.show();
    }
}

